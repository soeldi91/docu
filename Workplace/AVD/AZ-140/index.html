
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.4">
    
    
      
        <title>Plan an Azure Virtual Desktop Architecture - My Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.9c788c91.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#plan-an-azure-virtual-desktop-architecture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="My Docs" class="md-header__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Plan an Azure Virtual Desktop Architecture
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="My Docs" class="md-nav__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    My Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        <label class="md-nav__link" for="__nav_2" tabindex="0" aria-expanded="false">
          Security
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Security" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Security
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Security/Angriffe/Angriffe.md" class="md-nav__link">
        Angriffe
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../Security/Authentication/Token.md" class="md-nav__link">
        Authentication
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        <label class="md-nav__link" for="__nav_3" tabindex="0" aria-expanded="false">
          Workplace
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Workplace" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Workplace
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../AZ-140.md" class="md-nav__link">
        AVD
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lizenz" class="md-nav__link">
    Lizenz
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azure-virtual-desktop-experience-estimator" class="md-nav__link">
    Azure Virtual Desktop Experience Estimator
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#vm-size" class="md-nav__link">
    VM Size
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#images" class="md-nav__link">
    Images
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#email-discovery" class="md-nav__link">
    Email discovery
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="plan-an-azure-virtual-desktop-architecture">Plan an Azure Virtual Desktop Architecture</h1>
<h2 id="lizenz">Lizenz</h2>
<ul>
<li>Microsoft 365E3/E5</li>
<li>Microsoft 365 A3/A5/Student Use Benefits</li>
<li>Microsoft 365 F3</li>
<li>Microsoft 365 Business Premium</li>
<li>Windows 10 Enterprise E3/E5</li>
<li>Windows 10 Education A3/A5</li>
<li>Windows 10 VDA per user</li>
</ul>
<p>For published application on windows server only: Windows Server Remote Desktop Services client access license (RDS CAL)</p>
<h2 id="azure-virtual-desktop-experience-estimator">Azure Virtual Desktop Experience Estimator</h2>
<p>Use the estimation tool to view the round trip time your end users would experience with Windows Virtual Desktop. The tool uses the location of the device used to access it to determine round trip times to each Azure region via the Windows Virtual Desktop infrastructure</p>
<h2 id="vm-size">VM Size</h2>
<p>https://azureprice.net/?region=switzerlandnorth&amp;currency=CHF</p>
<p>A = Entry Level for dev/test
B = Economical Burstable
D = Gerneral Purpose Compute
E = optimized for in-memory hyper-threaded applications
F = Compute optimized VMs
L = Storage optimized
M = Memory optimized
N = GPU enabled</p>
<p>Series Examples:
- Av2
- Dsv4
- NVv3</p>
<h2 id="images">Images</h2>
<ol>
<li>Create an Azure compute gallery</li>
<li>Crealte an image definition</li>
<li>Create an image version</li>
</ol>
<h2 id="email-discovery">Email discovery</h2>
<p>https://jenzushsu.medium.com/configure-email-discovery-to-subscribe-to-your-windows-virtual-desktop-feed-49dbb8db553c</p>
<p>Host: _msradc
Text: https://rdweb.wvd.microsoft.com/api/arm/feeddiscovery
TTL: 1/2 Stund</p>
<h1 id="implement-an-azure-virtual-deesktop-infrastructure">Implement an Azure Virtual Deesktop Infrastructure</h1>
<h2 id="fs-logix">FS Logix</h2>
<p>Netapp:
Create a NetApp account
Create a capacity pool
Configure an Active Directory connection
Create a volume</p>
<h2 id="rdp-shortpath-preview">RDP Shortpath (Preview):</h2>
<p>Port 3390 über UDP
Bessere Performance</p>
<h2 id="load-balancing-algorithm-pooled">Load Balancing Algorithm (Pooled)</h2>
<ul>
<li>
<p>Breadth-first</p>
<ul>
<li>Breadth-first load balancing allows you to evenly distribute user sessions across the session hosts in a host pool</li>
</ul>
</li>
<li>
<p>Depth-first</p>
</li>
</ul>
<h2 id="msix">MSIX</h2>
<ol>
<li>Generate a signing certificate</li>
<li>Create an MSIX package</li>
<li>Create an MSIX image</li>
<li>Upload the MSIX image to Share1</li>
</ol>
<h2 id="location">Location</h2>
<p>App Group and Workspace in same location as the host pool</p>
<h2 id="sysprep">Sysprep</h2>
<p>System Preparation Tool (sysprep.exe) provides an "out of the box" experience by removing all personal data and resetting several components.
https://learn.microsoft.com/en-us/azure/virtual-machines/windows/prepare-for-upload-vhd-image#determine-when-to-use-sysprep</p>
<h2 id="storage-replication">Storage Replication</h2>
<ul>
<li>
<p>Geo-redudant (GRS)</p>
<ul>
<li>copies your data synchonously three times within a single physical location in the primary region using LRS. It then copies your data asynchronously to a single physical location in a secondary region that is hundreds of miles away from the primary region.</li>
</ul>
</li>
<li>
<p>Geo-zone-redundant (GZRS)</p>
<ul>
<li>is more expensive compared to GRS</li>
<li>combines the high availability provided by redundancy across availability zones with protection from regional outages provided by geo-replication.</li>
<li>Data in a GZRS storage account is copied across three Azure availability zones in the primary region and is also replicated to a secondary geographic region for protection from regional disasters</li>
</ul>
</li>
<li>
<p>Locally-redundant (LRS)</p>
<ul>
<li>copies your data synchonously three times within a single physical location in the primary region.</li>
<li>is the least expensive replication option, but isn`t recommended for applications requiring high availability or durability</li>
</ul>
</li>
<li>
<p>Zone-redundant (ZRS)</p>
<ul>
<li>copies your data synchronously across three Azure availability zones in the primary region</li>
<li>for applications requiring high availability, Microsoft recommends using ZRS in the primary region, and slo replicating to a secondary region</li>
</ul>
</li>
</ul>
<h1 id="manage-access-and-security">Manage Access and Security</h1>
<h2 id="rbac-rollen-fur-avd">RBAC Rollen für AVD</h2>
<p>https://learn.microsoft.com/en-us/azure/virtual-desktop/rbac</p>
<h1 id="plan-and-implement-user-environments-and-apps">Plan and implement user environments and apps</h1>
<p>For FS Logix the Storage Account must be joined to the ADDS Domain</p>
<p>Restore the default Remote Desktop Client settings: .\msrdcw.exe /reset
https://learn.microsoft.com/en-us/azure/virtual-desktop/troubleshoot-client-windows</p>
<p>Cloud Cache is an add-on to FSLogix. It uses a local cache to service all reads from a redirected Profile or Office Container, after the first read. Cloud Cache also allows the use of multiple remote locations, which are all continuously updated during the user session, creating true real-time profile replication
https://learn.microsoft.com/en-us/azure/architecture/example-scenario/wvd/windows-virtual-desktop-fslogix#using-cloud-cache</p>
<h1 id="monitor-and-maintain-and-azure-virtual-desktop-infrastructure">Monitor and Maintain and Azure Virtual Desktop Infrastructure</h1>
<h2 id="disaster-recovery">Disaster Recovery</h2>
<p>https://learn.microsoft.com/en-us/azure/virtual-desktop/disaster-recovery
Azure Site Recovery failover of the session hosts
- For personal host pools with dedicated VMs, replicate VMs using Azure Site Recovery to another region
- Geo-redundant storage (GRS) copies your data synchronously three times within a single physical location in the primary region using LRS.</p>
<h1 id="azure-traffice-manager">Azure Traffice Manager</h1>
<p>Azure Traffic Manager is a DNS-based traffic load balancer. This service allows you to distribute traffic to your public facing applications across the global Azure regions. Traffic Manager also provides your public endpoints with high availability and quick responsiveness.
https://learn.microsoft.com/en-us/azure/traffic-manager/traffic-manager-overview</p>
<p>Mit Automation Tasks können beispielsweise Business Stunden aktiviert werden für AVD VMs:
https://learn.microsoft.com/en-us/azure/logic-apps/create-automation-tasks-azure-resources</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.instant"], "search": "../../../assets/javascripts/workers/search.e5c33ebb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.ba449ae6.min.js"></script>
      
    
  </body>
</html>